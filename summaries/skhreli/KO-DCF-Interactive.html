<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCF Model - Coca-Cola vs NVIDIA Interactive Demo</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-style: italic;
        }
        
        .controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid #667eea;
        }
        
        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-item {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #444;
            font-size: 0.9em;
        }
        
        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            background: #764ba2;
            transform: scale(1.2);
        }
        
        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 600;
            margin-top: 5px;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .result-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        
        .result-value {
            font-size: 2em;
            font-weight: 700;
        }
        
        .result-subtext {
            font-size: 0.85em;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .comparison {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .comparison h3 {
            color: #856404;
            margin-bottom: 15px;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .company-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }
        
        .company-box h4 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .company-box ul {
            list-style: none;
            padding-left: 0;
        }
        
        .company-box li {
            padding: 5px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .company-box li:last-child {
            border-bottom: none;
        }
        
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä DCF Model Interactive Demo</h1>
        <p class="subtitle">Understanding "Steady State" vs "Cyclical Growth" - Coca-Cola vs NVIDIA</p>
        
        <div class="controls">
            <h3 style="margin-bottom: 20px; color: #333;">üéõÔ∏è Adjust DCF Assumptions</h3>
            
            <div class="control-group">
                <div class="control-item">
                    <label>Initial Free Cash Flow (FCF): <span class="value-display" id="fcf-value">$10,000M</span></label>
                    <input type="range" id="fcf" min="5000" max="20000" value="10000" step="500">
                </div>
                
                <div class="control-item">
                    <label>Early Growth Rate (Years 1-5): <span class="value-display" id="early-growth-value">4.0%</span></label>
                    <input type="range" id="early-growth" min="0" max="15" value="4" step="0.5">
                </div>
                
                <div class="control-item">
                    <label>Late Growth Rate (Years 6-10): <span class="value-display" id="late-growth-value">3.0%</span></label>
                    <input type="range" id="late-growth" min="0" max="10" value="3" step="0.5">
                </div>
                
                <div class="control-item">
                    <label>Terminal Growth Rate: <span class="value-display" id="terminal-growth-value">2.0%</span></label>
                    <input type="range" id="terminal-growth" min="0" max="5" value="2" step="0.1">
                </div>
                
                <div class="control-item">
                    <label>Discount Rate (WACC): <span class="value-display" id="wacc-value">6.8%</span></label>
                    <input type="range" id="wacc" min="4" max="12" value="6.8" step="0.1">
                </div>
                
                <div class="control-item">
                    <label>Net Debt: <span class="value-display" id="debt-value">$35,000M</span></label>
                    <input type="range" id="debt" min="0" max="50000" value="35000" step="1000">
                </div>
            </div>
        </div>
        
        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-title">Free Cash Flow Projection</div>
                <canvas id="cashFlowChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Present Value by Year</div>
                <canvas id="pvChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Cumulative Enterprise Value</div>
                <canvas id="cumulativeChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Coca-Cola vs NVIDIA Growth Patterns</div>
                <canvas id="comparisonChart"></canvas>
            </div>
        </div>
        
        <div class="results">
            <div class="result-card">
                <div class="result-label">Enterprise Value</div>
                <div class="result-value" id="ev-result">$240,804M</div>
                <div class="result-subtext">Sum of all discounted cash flows</div>
            </div>
            
            <div class="result-card">
                <div class="result-label">Equity Value</div>
                <div class="result-value" id="equity-result">$205,804M</div>
                <div class="result-subtext">EV minus net debt</div>
            </div>
            
            <div class="result-card">
                <div class="result-label">Fair Value per Share</div>
                <div class="result-value" id="share-result">$47.86</div>
                <div class="result-subtext">Based on 4,300M shares</div>
            </div>
            
            <div class="result-card">
                <div class="result-label">Terminal Value %</div>
                <div class="result-value" id="terminal-pct-result">64.5%</div>
                <div class="result-subtext">Of total enterprise value</div>
            </div>
        </div>
        
        <div class="comparison">
            <h3>üîç Why Coca-Cola is "Easy" vs NVIDIA is "Hard"</h3>
            <div class="comparison-grid">
                <div class="company-box">
                    <h4>ü•§ Coca-Cola (Steady State)</h4>
                    <ul>
                        <li><strong>Growth:</strong> Smooth 2-4% annually</li>
                        <li><strong>Product Cycle:</strong> Decades (same products)</li>
                        <li><strong>Margins:</strong> Stable 25-30%</li>
                        <li><strong>Terminal Value:</strong> Easy to justify</li>
                        <li><strong>Cyclicality:</strong> Low risk</li>
                        <li><strong>DCF Confidence:</strong> ‚úÖ High</li>
                    </ul>
                </div>
                
                <div class="company-box">
                    <h4>üñ•Ô∏è NVIDIA (High Growth/Cyclical)</h4>
                    <ul>
                        <li><strong>Growth:</strong> 40% ‚Üí 22% ‚Üí 17% ‚Üí ???</li>
                        <li><strong>Product Cycle:</strong> 12-18 months (V100‚ÜíA100‚ÜíH100‚ÜíB200)</li>
                        <li><strong>Margins:</strong> Depends on competition</li>
                        <li><strong>Terminal Value:</strong> Highly speculative</li>
                        <li><strong>Cyclicality:</strong> High risk (tech + business + product)</li>
                        <li><strong>DCF Confidence:</strong> ‚ö†Ô∏è Low</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Chart instances
        let cashFlowChart, pvChart, cumulativeChart, comparisonChart;
        
        // Constants
        const SHARES_OUTSTANDING = 4300; // millions
        
        // Get all controls
        const controls = {
            fcf: document.getElementById('fcf'),
            earlyGrowth: document.getElementById('early-growth'),
            lateGrowth: document.getElementById('late-growth'),
            terminalGrowth: document.getElementById('terminal-growth'),
            wacc: document.getElementById('wacc'),
            debt: document.getElementById('debt')
        };
        
        // Update value displays
        function updateDisplays() {
            document.getElementById('fcf-value').textContent = `$${parseInt(controls.fcf.value).toLocaleString()}M`;
            document.getElementById('early-growth-value').textContent = `${controls.earlyGrowth.value}%`;
            document.getElementById('late-growth-value').textContent = `${controls.lateGrowth.value}%`;
            document.getElementById('terminal-growth-value').textContent = `${controls.terminalGrowth.value}%`;
            document.getElementById('wacc-value').textContent = `${controls.wacc.value}%`;
            document.getElementById('debt-value').textContent = `$${parseInt(controls.debt.value).toLocaleString()}M`;
        }
        
        // Calculate DCF
        function calculateDCF() {
            const fcf0 = parseFloat(controls.fcf.value);
            const g1 = parseFloat(controls.earlyGrowth.value) / 100;
            const g2 = parseFloat(controls.lateGrowth.value) / 100;
            const gTerm = parseFloat(controls.terminalGrowth.value) / 100;
            const r = parseFloat(controls.wacc.value) / 100;
            const debt = parseFloat(controls.debt.value);
            
            const years = [];
            const cashFlows = [];
            const discountFactors = [];
            const presentValues = [];
            
            // Calculate 10 years of cash flows
            for (let year = 1; year <= 10; year++) {
                years.push(year);
                
                // Determine growth rate
                const growthRate = year <= 5 ? g1 : g2;
                
                // Calculate FCF
                const previousFCF = year === 1 ? fcf0 : cashFlows[year - 2];
                const fcf = previousFCF * (1 + growthRate);
                cashFlows.push(fcf);
                
                // Calculate discount factor and PV
                const discountFactor = 1 / Math.pow(1 + r, year);
                discountFactors.push(discountFactor);
                
                const pv = fcf * discountFactor;
                presentValues.push(pv);
            }
            
            // Calculate terminal value
            const year10FCF = cashFlows[9];
            const terminalFCF = year10FCF * (1 + gTerm);
            const terminalValue = terminalFCF / (r - gTerm);
            const pvTerminal = terminalValue * discountFactors[9];
            
            // Sum up enterprise value
            const pvExplicit = presentValues.reduce((a, b) => a + b, 0);
            const enterpriseValue = pvExplicit + pvTerminal;
            const equityValue = enterpriseValue - debt;
            const fairValuePerShare = equityValue / SHARES_OUTSTANDING;
            
            return {
                years,
                cashFlows,
                presentValues,
                pvExplicit,
                pvTerminal,
                terminalValue,
                enterpriseValue,
                equityValue,
                fairValuePerShare
            };
        }
        
        // Update all charts and results
        function updateAll() {
            updateDisplays();
            const dcf = calculateDCF();
            
            // Update result cards
            document.getElementById('ev-result').textContent = `$${Math.round(dcf.enterpriseValue).toLocaleString()}M`;
            document.getElementById('equity-result').textContent = `$${Math.round(dcf.equityValue).toLocaleString()}M`;
            document.getElementById('share-result').textContent = `$${dcf.fairValuePerShare.toFixed(2)}`;
            
            const terminalPct = (dcf.pvTerminal / dcf.enterpriseValue * 100).toFixed(1);
            document.getElementById('terminal-pct-result').textContent = `${terminalPct}%`;
            
            // Update Cash Flow Chart
            cashFlowChart.data.labels = dcf.years;
            cashFlowChart.data.datasets[0].data = dcf.cashFlows;
            cashFlowChart.update();
            
            // Update PV Chart
            pvChart.data.labels = [...dcf.years, 'Terminal'];
            pvChart.data.datasets[0].data = [...dcf.presentValues, dcf.pvTerminal];
            pvChart.update();
            
            // Update Cumulative Chart
            const cumulative = [];
            let sum = 0;
            dcf.presentValues.forEach(pv => {
                sum += pv;
                cumulative.push(sum);
            });
            cumulative.push(sum + dcf.pvTerminal);
            
            cumulativeChart.data.labels = [...dcf.years, 'Terminal'];
            cumulativeChart.data.datasets[0].data = cumulative;
            cumulativeChart.update();
            
            // Update comparison chart (this one is static but we'll refresh it)
            updateComparisonChart();
        }
        
        // Initialize charts
        function initCharts() {
            const dcf = calculateDCF();
            
            // Cash Flow Chart
            const ctx1 = document.getElementById('cashFlowChart').getContext('2d');
            cashFlowChart = new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: dcf.years,
                    datasets: [{
                        label: 'Free Cash Flow ($M)',
                        data: dcf.cashFlows,
                        backgroundColor: 'rgba(102, 126, 234, 0.6)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + (value/1000).toFixed(1) + 'B';
                                }
                            }
                        }
                    }
                }
            });
            
            // PV Chart
            const ctx2 = document.getElementById('pvChart').getContext('2d');
            pvChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: [...dcf.years, 'Terminal'],
                    datasets: [{
                        label: 'Present Value ($M)',
                        data: [...dcf.presentValues, dcf.pvTerminal],
                        backgroundColor: function(context) {
                            return context.dataIndex === 10 ? 'rgba(255, 99, 132, 0.6)' : 'rgba(75, 192, 192, 0.6)';
                        },
                        borderColor: function(context) {
                            return context.dataIndex === 10 ? 'rgba(255, 99, 132, 1)' : 'rgba(75, 192, 192, 1)';
                        },
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + (value/1000).toFixed(1) + 'B';
                                }
                            }
                        }
                    }
                }
            });
            
            // Cumulative Chart
            const ctx3 = document.getElementById('cumulativeChart').getContext('2d');
            const cumulative = [];
            let sum = 0;
            dcf.presentValues.forEach(pv => {
                sum += pv;
                cumulative.push(sum);
            });
            cumulative.push(sum + dcf.pvTerminal);
            
            cumulativeChart = new Chart(ctx3, {
                type: 'line',
                data: {
                    labels: [...dcf.years, 'Terminal'],
                    datasets: [{
                        label: 'Cumulative Enterprise Value ($M)',
                        data: cumulative,
                        backgroundColor: 'rgba(153, 102, 255, 0.2)',
                        borderColor: 'rgba(153, 102, 255, 1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + (value/1000).toFixed(1) + 'B';
                                }
                            }
                        }
                    }
                }
            });
            
            // Comparison Chart
            const ctx4 = document.getElementById('comparisonChart').getContext('2d');
            updateComparisonChart();
        }
        
        function updateComparisonChart() {
            const years = Array.from({length: 10}, (_, i) => i + 1);
            
            // Coca-Cola: steady 3-4% growth
            const koRevenue = [100];
            for (let i = 1; i < 10; i++) {
                koRevenue.push(koRevenue[i-1] * 1.035);
            }
            
            // NVIDIA: high growth tapering
            const nvdaRevenue = [100];
            const nvdaGrowth = [0.40, 0.35, 0.30, 0.25, 0.22, 0.20, 0.17, 0.15, 0.13];
            for (let i = 0; i < 9; i++) {
                nvdaRevenue.push(nvdaRevenue[i] * (1 + nvdaGrowth[i]));
            }
            
            if (comparisonChart) {
                comparisonChart.destroy();
            }
            
            const ctx4 = document.getElementById('comparisonChart').getContext('2d');
            comparisonChart = new Chart(ctx4, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [
                        {
                            label: 'Coca-Cola (Steady State)',
                            data: koRevenue,
                            borderColor: 'rgba(220, 38, 38, 1)',
                            backgroundColor: 'rgba(220, 38, 38, 0.1)',
                            borderWidth: 3,
                            tension: 0.4,
                            pointRadius: 5
                        },
                        {
                            label: 'NVIDIA (Cyclical Growth)',
                            data: nvdaRevenue,
                            borderColor: 'rgba(34, 197, 94, 1)',
                            backgroundColor: 'rgba(34, 197, 94, 0.1)',
                            borderWidth: 3,
                            tension: 0.4,
                            pointRadius: 5,
                            borderDash: [5, 5]
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(0);
                                }
                            },
                            title: {
                                display: true,
                                text: 'Indexed Revenue (Base = 100)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Year'
                            }
                        }
                    }
                }
            });
        }
        
        // Add event listeners
        Object.values(controls).forEach(control => {
            control.addEventListener('input', updateAll);
        });
        
        // Initialize
        initCharts();
        updateDisplays();
    </script>
</body>
</html>